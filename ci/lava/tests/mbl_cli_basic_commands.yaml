metadata:
    format: "Lava-Test Test Definition 1.0"
    name: MBL CLI Basic Commands
    description: "Test the MBL CLI basic commands"

    params:
        #
        # virtual_env_path specifies the path to the Python virtual environment
        #
        virtual_env_path:

run:
    steps:

        # Install the test dependencies
        - $virtual_env_path/pip3 install pexpect
        - $virtual_env_path/pip3 install pytest
        # Don't stop the test run when pytest returns an error code on test failure.
        - set -e
        # Run the test suite.
        - $virtual_env_path/pytest --verbose --color=no ./tests/integration

